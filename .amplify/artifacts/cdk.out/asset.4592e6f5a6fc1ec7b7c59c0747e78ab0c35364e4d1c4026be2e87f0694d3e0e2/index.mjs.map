{
  "version": 3,
  "sources": ["../../../../node_modules/@aws-amplify/backend-function/src/lambda-shims/cjs_shim.ts", "../../../../amplify/functions/send-change-email/handler.ts"],
  "sourcesContent": ["import { createRequire } from 'node:module';\nimport path from 'node:path';\nimport url from 'node:url';\nglobal.require = createRequire(import.meta.url);\nglobal.__filename = url.fileURLToPath(import.meta.url);\nglobal.__dirname = path.dirname(__filename);\n", "export const handler = async (event: any) => {\r\n    const { email, token, requestId, changes } = event.arguments;\r\n\r\n    // Construct the confirmation link\r\n    const confirmLink = `https://your-app-domain.com/confirm-changes?token=${token}&id=${requestId}`;\r\n\r\n    // For now, we'll just log the email content\r\n    // In production, you would use AWS SES to send this email\r\n    console.log('=== EMAIL TO BE SENT ===');\r\n    console.log(`To: ${email}`);\r\n    console.log(`Subject: Profile Change Request`);\r\n    console.log(`Body:`);\r\n    console.log(`An administrator has requested to update your profile.`);\r\n    console.log(`Proposed changes: ${JSON.stringify(changes, null, 2)}`);\r\n    console.log(`Please click the link below to review and confirm:`);\r\n    console.log(confirmLink);\r\n    console.log('========================');\r\n\r\n    // TODO: To enable real email sending with AWS SES:\r\n    // 1. Verify your domain or email address in AWS SES\r\n    // 2. Install @aws-sdk/client-ses: npm install @aws-sdk/client-ses\r\n    // 3. Uncomment the code below:\r\n\r\n    /*\r\n    import { SESClient, SendEmailCommand } from \"@aws-sdk/client-ses\";\r\n    \r\n    const sesClient = new SESClient();\r\n    \r\n    const params = {\r\n        Source: 'noreply@your-domain.com',\r\n        Destination: {\r\n            ToAddresses: [email]\r\n        },\r\n        Message: {\r\n            Subject: {\r\n                Data: 'Profile Change Request'\r\n            },\r\n            Body: {\r\n                Html: {\r\n                    Data: \\`\r\n                        <h2>Profile Change Request</h2>\r\n                        <p>An administrator has requested to update your profile.</p>\r\n                        <p><strong>Proposed changes:</strong></p>\r\n                        <pre>\\${JSON.stringify(changes, null, 2)}</pre>\r\n                        <p><a href=\"\\${confirmLink}\">Click here to review and confirm</a></p>\r\n                    \\`\r\n                }\r\n            }\r\n        }\r\n    };\r\n    \r\n    await sesClient.send(new SendEmailCommand(params));\r\n    */\r\n\r\n    return {\r\n        success: true,\r\n        message: 'Email logged to console (SES not configured)',\r\n        confirmLink\r\n    };\r\n};\r\n"],
  "mappings": ";AAAA,OAAS,iBAAAA,MAAqB,cAC9B,OAAOC,MAAU,YACjB,OAAOC,MAAS,WAChB,OAAO,QAAUF,EAAc,YAAY,GAAG,EAC9C,OAAO,WAAaE,EAAI,cAAc,YAAY,GAAG,EACrD,OAAO,UAAYD,EAAK,QAAQ,UAAU,ECLnC,IAAME,EAAU,MAAOC,GAAe,CACzC,GAAM,CAAE,MAAAC,EAAO,MAAAC,EAAO,UAAAC,EAAW,QAAAC,CAAQ,EAAIJ,EAAM,UAG7CK,EAAc,qDAAqDH,CAAK,OAAOC,CAAS,GAI9F,eAAQ,IAAI,0BAA0B,EACtC,QAAQ,IAAI,OAAOF,CAAK,EAAE,EAC1B,QAAQ,IAAI,iCAAiC,EAC7C,QAAQ,IAAI,OAAO,EACnB,QAAQ,IAAI,wDAAwD,EACpE,QAAQ,IAAI,qBAAqB,KAAK,UAAUG,EAAS,KAAM,CAAC,CAAC,EAAE,EACnE,QAAQ,IAAI,oDAAoD,EAChE,QAAQ,IAAIC,CAAW,EACvB,QAAQ,IAAI,0BAA0B,EAsC/B,CACH,QAAS,GACT,QAAS,+CACT,YAAAA,CACJ,CACJ",
  "names": ["createRequire", "path", "url", "handler", "event", "email", "token", "requestId", "changes", "confirmLink"]
}
